var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,c,d){c=null!=c?c:function(a){return a};var b=[],f="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if("function"==typeof f){a=f.call(a);for(var g=0;!(f=a.next()).done;)b.push(c.call(d,f.value,g++))}else for(f=a.length,g=0;g<f;g++)b.push(c.call(d,a[g],g));return b}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(c||"")+"_"+b++,c)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");var scene_index=0,locked=!1;
function csrfSafeMethod(a){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(a)}function getCookie(a){var b=null;if(document.cookie&&""!==document.cookie)for(var c=document.cookie.split(";"),d=0;d<c.length;d++){var e=c[d].trim();if(e.substring(0,a.length+1)===a+"="){b=decodeURIComponent(e.substring(a.length+1));break}}return b}$.ajaxSetup({beforeSend:function(a,b){csrfSafeMethod(b.type)||this.crossDomain||(b=getCookie("csrftoken"),a.setRequestHeader("X-CSRFToken",b))}});
$(document).ready(function(){console.log("Starting");console.log(order);check()});
function updateDisplay(a){var b=$("#top"),c=$("#bottom");"Init"===a.state?(b.text("Initialising"),c.text(session)):"Active"===a.state&&(b.text(a.l1),c.text(a.l2));"Blank"!==current_state&&"Blank"===a.state?$(".bar").fadeOut():"Blank"===current_state&&"Blank"!==a.state&&$(".bar").fadeIn();$(".scenechange").removeClass("active");b=sceneToProgram(a.scene);$("#scene-"+b.toString()).addClass("active");current_state=a.state;scene_index=b;a=adjacentPrograms();null===a.prev?$("#previous").prop("disabled",
!0):$("#previous").prop("disabled",!1);null===a.next?$("#next").prop("disabled",!0):$("#next").prop("disabled",!1);"Blank"===current_state?$("#blank").html('<i class="fas fa-play" title="Un-Blank"></i>'):$("#blank").html('<i class="fas fa-pause" title="Blank"></i>')}function showblank(){locked||("Blank"===current_state?send(order.get(scene_index),"Active"):send(order.get(scene_index),"Blank"))}function scenechange(a){locked||(scene_index=a,direct(order.get(a)))}
function showprevious(){if(!locked){var a=adjacentPrograms().prev;null!==a&&(scene_index=a,direct(order.get(a)))}}function shownext(){if(!locked){var a=adjacentPrograms().next;null!==a&&(scene_index=a,direct(order.get(a)))}}function direct(a){"Active"===current_state?(send(a,"Blank"),lock(),setTimeout(function(){unlock();send(a,"Active")},1E3)):send(a,"Active")}function lock(){$(".control").addClass("disabled");locked=!0}function unlock(){$(".control").removeClass("disabled");locked=!1}
function sceneToProgram(a){for(var b=null,c=null,d=$jscomp.makeIterator(order),e=d.next();!e.done;e=d.next())e=e.value,e[1]===a&&(e[0]>=scene_index&&null===c&&(c=e[0]),null===b&&(b=e[0]));return null===c?b:c}function adjacentPrograms(){var a=Array.from(order.keys()),b=a.indexOf(scene_index),c=null,d=null;0<b&&(c=a[b-1]);b<a.length-1&&(d=a[b+1]);return{next:d,prev:c}}
function send(a,b){$.ajax({url:"/api/third/update/",method:"POST",dataType:"json",data:{session:session,key:api_key,scene:a,state:b},success:updateDisplay})}function check(){$.ajax({url:"/api/third/session_state/",dataType:"json",type:"get",data:{session:session},success:updateDisplay})};
